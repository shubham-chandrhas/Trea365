<div id="qutationMark" class="qutationreviewWrap" *ngIf = "selectedQuotation && selectedQuotation.status==3">
    <h1 class="pageTitle">Quote No. {{selectedQuotation.project_estimate_no}}</h1>
    
    <div class="selSection">
        <div class="quotationreviewDetails">
            <div class="row">
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Status</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col change-request">{{selectedQuotation.status_details.status}}</div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Date</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{util.getFormatedDate(selectedQuotation.project_estimate_date)}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Generated by</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.generated_by.first_name}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="servicesDetails" *ngIf="versions" >
                <h4 class="detailsHeading">Version Log</h4>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Managed By</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let version of versions; index as indx">
                                <td *ngIf="indx!=0">{{version.generated_by.first_name}}  {{version.generated_by.last_name}}</td>
                                <td *ngIf="indx!=0">{{version.status_details.status}}</td>
                                <td *ngIf="indx!=0">{{util.getFormatedDate(util.unixTimestampToLocalDate(version.updated_at_unix).localDate)}}</td>
                                <td *ngIf="indx!=0">{{util.unixTimestampToLocalDate(version.updated_at_unix).localDate | date:'hh:mm a'}}</td>
                                <td *ngIf="indx!=0">NA</td>
                                
                            </tr>
                            <tr *ngIf="(versions && versions.length==0) || selectedQuotation.versions[0] == null ">
                                <td colspan="5" class="text-center">No Vesion available for Quatiotion.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="clearfix"></div>


			      <h3 class="detailsHeading">Client</h3>
            <div class="row">
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Client Name</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.client_details.company_name ? selectedQuotation.client_details.company_name : selectedQuotation.client_details.first_name +' '+ selectedQuotation.client_details.last_name }}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Work Location</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col" *ngIf="selectedQuotation.client_work_location">
                                <div >
                                    {{selectedQuotation.client_work_location.address_line_1 ? util.concatenateStrings(selectedQuotation.client_work_location.address_line_2,selectedQuotation.client_work_location.address_line_1) : '' }}
                                </div>

                                <!-- <ng-template #manuallyAddedWorkLocation>
                                    {{selectedQuotation.client_work_location.address_line_1 ? selectedQuotation.client_work_location.address_line_1 + ',' : '' }} {{selectedQuotation.client_work_location.address_line_2 ? selectedQuotation.client_work_location.address_line_2 + ',' : '' }}
                                    {{selectedQuotation.client_work_location.city_details.city_name ? selectedQuotation.client_work_location.city_details.city_name + ',' : '' }}
                                    {{selectedQuotation.client_work_location.province_details.province_name ? selectedQuotation.client_work_location.province_details.province_name + ',' : '' }}
                                    {{selectedQuotation.client_work_location.country_details.country_name ? selectedQuotation.client_work_location.country_details.country_name + ',' : '' }}
                                    {{selectedQuotation.client_work_location.postal_code}}
                                </ng-template> -->

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Billing Address</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col" *ngIf="selectedQuotation.client_billing_location">
                                <div >
                                    {{selectedQuotation.client_billing_location.address_line_1 ? util.concatenateStrings(selectedQuotation.client_billing_location.address_line_2,selectedQuotation.client_billing_location.address_line_1) : '' }}
                                </div>

                                <!-- <ng-template #manuallyAddedBillingLocation>
                                    {{selectedQuotation.client_billing_location.address_line_1 ? selectedQuotation.client_billing_location.address_line_1 + ',' : '' }} {{selectedQuotation.client_billing_location.address_line_2 ? selectedQuotation.client_billing_location.address_line_2 + ',' : '' }}
                                    {{selectedQuotation.client_billing_location.city_details.city_name ? selectedQuotation.client_billing_location.city_details.city_name + ',' : '' }}
                                    {{selectedQuotation.client_billing_location.province_details.province_name ? selectedQuotation.client_billing_location.province_details.province_name + ',' : '' }}
                                    {{selectedQuotation.client_billing_location.country_details.country_name ? selectedQuotation.client_billing_location.country_details.country_name + ',' : '' }}
                                    {{selectedQuotation.client_billing_location.postal_code}}
                                </ng-template> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Contact</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.client_contact_details ? selectedQuotation.client_contact_details.name : 'N/A'}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Email</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.client_contact_details ? selectedQuotation.client_contact_details.email_id : 'N/A'}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Phone Number</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.client_contact_details ? util.maskPhoneNumber(selectedQuotation.client_contact_details.phone_no) : 'N/A'}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>

        <h3
        *ngIf="
          selectedQuotation.schedules && selectedQuotation.schedules.schedule_type_details && selectedQuotation.schedules.schedule_type_details.status == 'Not Known' "
        class="detailsHeading"
      >
        Schedule
      </h3>
      <div
        class="scheduleDetails"
        *ngIf="
          selectedQuotation.schedules && selectedQuotation.schedules.schedule_type_details && selectedQuotation.schedules.schedule_type_details.status == 'Not Known'
        "
      >
        <div class="row">
          <div class="col-sm-6">
            <div class="row">
              <div class="col-sm-4">
                    <div class="info-col">
                        Not Known
                    </div>
              </div>
            </div>
          </div>
        </div>
      </div>
        <h3 class="detailsHeading" *ngIf="selectedQuotation.schedules &&
        (selectedQuotation.schedules.start_date ||
          selectedQuotation.schedules.end_date ||
          selectedQuotation.schedules.end_time ||
          selectedQuotation.schedules.start_time)">Schedule</h3>
        <div class="scheduleDetails" *ngIf="selectedQuotation.schedules &&
        (selectedQuotation.schedules.start_date ||
          selectedQuotation.schedules.end_date ||
          selectedQuotation.schedules.end_time ||
          selectedQuotation.schedules.start_time)">
            <div class="row">
              <div class="col-sm-6">
                <div class="row">
                  <div class="col-sm-4">
                    <div class="label-col">Start Date</div>
                  </div>
                  <div class="col-sm-8">
                    <div class="info-col">{{util.getFormatedDate(selectedQuotation.schedules.start_date)}}</div>
                  </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                      <div class="label-col">Start Time</div>
                    </div>
                    <div class="col-sm-8">
                      <div class="info-col">{{selectedQuotation.schedules.start_time}} {{selectedQuotation.schedules.start_time_format}}</div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-4">
                      <div class="label-col">End Date</div>
                    </div>
                    <div class="col-sm-8">
                      <div class="info-col">{{util.getFormatedDate(selectedQuotation.schedules.end_date)}}</div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-4">
                      <div class="label-col">End Time</div>
                    </div>
                    <div class="col-sm-8">
                      <div class="info-col">{{selectedQuotation.schedules.end_time}} {{selectedQuotation.schedules.end_time_format}}</div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <!-- <div class="row">
                    <div class="col-sm-4">
                      <div class="label-col"></div>
                    </div>
                    <div class="col-sm-8">
                      <div class="info-col">{{selectedQuotation.schedules.schedule_type == 2 ? selectedQuotation.schedules.schedule_repeat_details.status : 'N/A'}}</div>
                      <div class="info-col">{{selectedQuotation.schedules.schedule_type == 2 ? selectedQuotation.schedules.schedule_days:''}}</div>
                    </div>
                  </div> -->
                </div>
              </div>
        </div>

        <div class="inspectionDetails" *ngIf="selectedQuotation.site_inspection">
            <h4 class="detailsHeading">Site Inspection</h4>
            <div class="row infoWrap">
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Date</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{util.getFormatedDate(selectedQuotation.site_inspection.inspection_date)}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Time</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.site_inspection.start_time}} {{selectedQuotation.site_inspection.start_time_format}}-{{selectedQuotation.site_inspection.end_time}} {{selectedQuotation.site_inspection.end_time_format}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label-col">Inspector</div>
                        </div>
                        <div class="col-sm-6">
                            <div class="info-col">{{selectedQuotation.site_inspection.inspector_details ? selectedQuotation.site_inspection.inspector_details.first_name : 'N/A'}} {{selectedQuotation.site_inspection.inspector_details ? selectedQuotation.site_inspection.inspector_details.last_name : ''}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="reqDescWrap">
            <h3 class="detailsHeading">Requirements</h3>
            <div class="description overflowTxt">
                {{selectedQuotation.requirements}}
            </div>
            <div class="row">
                <div class="col-sm-3" *ngFor="let indx=index ;let img of selectedQuotation.images">
                    <div class="previewImg">
                        <img src="{{img.image_path}}" class="img-responsive" />
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>

        <div class="servicesDetails" *ngIf="selectedQuotation.services.length > 0">
            <!-- <h4 class="detailsHeading">Services</h4> -->
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Service</th>
                            <th class="text-right">Cost</th>
                            <th class="text-right">Quantity</th>
                            <th class="text-right">Amount</th>
                            <!-- <th>Details</th> -->
                            <th><!-- Leave empty for alignment --></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let service of selectedQuotation.services; index as indx" [ngClass]="service.fontColor">
                            <td [ngClass]="service.is_approved == 2 ? 'rejected' :'' ">{{service.service_defination ? service.service_defination.service_definition :service.ad_hoc_service}}</td>
                            <td class="text-right" [ngClass]="service.is_approved == 2 ? 'rejected' :'' ">{{service.cost | currency: util.getCurrency() :'symbol-narrow'}}</td>
                            <td class="text-right" [ngClass]="service.is_approved == 2 ? 'rejected' :'' ">{{service.quantity}} </td>
                            <td class="text-right" [ngClass]="service.is_approved == 2 ? 'rejected' :'' ">{{service.total_amount | currency: util.getCurrency() :'symbol-narrow'}}</td>
                            <!-- <td [ngClass]="service.is_approved == 2 ? 'rejected' :'' ">{{service.details ? service.details : 'N/A' }}</td> -->
                            <td class="text-right">{{ service.is_cr == 1 ? service.is_approved == 1 ? '(Approved)' : '(Rejected)' : '' }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan=3 class="text-right">
                          <span style="padding-right:1em;">Services Subtotal</span>
                        </td>
                        <td>
                          <div class="text-right" [ngClass]="selectedQuotation.newServicesTotalCost != selectedQuotation.costs[0].cost_of_services ? 'oldAmt' : '' ">{{selectedQuotation.costs[0].cost_of_services | currency: util.getCurrency() :'symbol-narrow'}}</div>
                          <div class="newAmt text-right" *ngIf="selectedQuotation.newServicesTotalCost != selectedQuotation.costs[0].cost_of_services">{{selectedQuotation.newServicesTotalCost | currency: util.getCurrency() :'symbol-narrow'}}</div>
                        </td>
                        <td><!-- Leave empty for alignment --></td>
                      </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="clearfix"></div>

        <div class="materialsDetails">
				<!-- <h4 class="detailsHeading">Products / Materials</h4> -->
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Product / Material</th>
                            <th class="text-right">Cost</th>
                            <th class="text-right">Quantity</th>
                            <th class="text-right">Amount</th>
                            <!-- <th>Details</th> -->
                            <th><!-- Leave empty for alignment --></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let material of selectedQuotation.product_materials; index as indx" [ngClass]="material.fontColor">
                            <td [ngClass]="material.is_approved == 2 ? 'rejected' :'' ">{{material.manf_part ? material.manf_part.short_name :'N/A'}} </td>
                            <td class="text-right" [ngClass]="material.is_approved == 2 ? 'rejected' :'' ">{{material.cost | currency: util.getCurrency() :'symbol-narrow'}}</td>
                            <td class="text-right" [ngClass]="material.is_approved == 2 ? 'rejected' :'' ">{{material.quantity}} <span class="">&nbsp;{{material.manf_part ? material.manf_part.uom_name.uom_symbol : ''}}</span></td>
                            <td class="text-right" [ngClass]="material.is_approved == 2 ? 'rejected' :'' ">{{material.total_amount | currency: util.getCurrency() :'symbol-narrow'}}</td>
                            <!-- <td [ngClass]="material.is_approved == 2 ? 'rejected' :'' ">{{material.details ? material.details : 'N/A'}}</td> -->
                            <td class="text-right">{{ material.is_cr == 1 ? material.is_approved == 1 ? '(Approved)' : '(Rejected)' : ''}}</td>
                        </tr>                        
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan=3 style="text-align: right">
                          <span class="text-right">Products & Materials Subtotal</span>
                        </td>
                        <td>
                          <div class="text-right" [ngClass]="selectedQuotation.newMaterialsTotalCost != selectedQuotation.costs[0].cost_of_materials ? 'oldAmt' : '' ">{{selectedQuotation.costs[0].cost_of_materials | currency: util.getCurrency() :'symbol-narrow'}}</div>
                          <div class="newAmt text-right" *ngIf="selectedQuotation.newMaterialsTotalCost !=selectedQuotation.costs[0].cost_of_materials">{{selectedQuotation.newMaterialsTotalCost | currency: util.getCurrency() :'symbol-narrow'}}</div>
                        </td>
                        <td><!-- Leave empty for alignment --></td>
                      </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="clearfix"></div>
        
        <div class="paymentsDetails">
            <h3 class="detailsHeading">Fees</h3>
            <div class="costCalculate">
                <div class="row">
                    <div class="col-sm-6">
                        <h4 class="detailsHeading">Costs</h4>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Cost of Services </div>
                            </div>
                            <div class="col-sm-5">
                              <div class="info-col text-right">
                                <div [ngClass]="selectedQuotation.newServicesTotalCost != selectedQuotation.costs[0].cost_of_services ? 'oldAmt' : '' ">{{selectedQuotation.costs[0].cost_of_services | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                <div class="newAmt" *ngIf="selectedQuotation.newServicesTotalCost != selectedQuotation.costs[0].cost_of_services">{{selectedQuotation.newServicesTotalCost | currency: util.getCurrency() :'symbol-narrow'}}</div>
                              </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Cost of Products/Materials</div>
                            </div>
                            <div class="col-sm-5">
                              <div class="info-col text-right">
                                <div [ngClass]="selectedQuotation.newMaterialsTotalCost != selectedQuotation.costs[0].cost_of_materials ? 'oldAmt' : '' ">{{selectedQuotation.costs[0].cost_of_materials | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                <div class="newAmt" *ngIf="selectedQuotation.newMaterialsTotalCost != selectedQuotation.costs[0].cost_of_materials">{{selectedQuotation.newMaterialsTotalCost | currency: util.getCurrency() :'symbol-narrow'}}</div>
                              </div>
                            </div>
                        </div>
                        <div class="row MB15">
                            <div class="col-sm-6">
                                <div class="label-col">Subtotal</div>
                            </div>
                            <div class="col-sm-5">
                              <div class="info-col text-right">
                                <div [ngClass]="selectedQuotation.newSubtotal != selectedQuotation.costs[0].subtotal ? 'oldAmt' : '' "><strong>{{selectedQuotation.costs[0].subtotal | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                                <div class="newAmt" *ngIf="selectedQuotation.newSubtotal != selectedQuotation.costs[0].subtotal"><strong>{{selectedQuotation.newSubtotal | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                              </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Shipping & Handling</div>
                            </div>
                            <div class="col-sm-5">
                                <div class="info-col text-right">{{selectedQuotation.costs[0].shipping_and_handling | currency: util.getCurrency() :'symbol-narrow'}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Adjustment (+/-)</div>
                            </div>
                            <div class="col-sm-5">
                                <div class="info-col text-right">{{selectedQuotation.costs[0].adjustment | currency: util.getCurrency() :'symbol-narrow'}}</div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Taxes ({{selectedQuotation.costs[0].taxes}}%)</div>
                            </div>
                            <div class="col-sm-5">
                                <div class="info-col text-right" *ngIf="selectedQuotation.costs[0].tax_amount == selectedQuotation.newTaxAmount">
                                    <div><strong>{{selectedQuotation.costs[0].tax_amount | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                                </div>
                                <div class="info-col text-right" *ngIf="selectedQuotation.costs[0].tax_amount != selectedQuotation.newTaxAmount">
                                    <div class="oldAmt"><strong>{{selectedQuotation.costs[0].tax_amount | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                                    <div class="newAmt"><strong>{{selectedQuotation.newTaxAmount | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Total Cost</div>
                            </div>
                            <div class="col-sm-5">
                              <div class="info-col text-right">
                                <div  [ngClass]="selectedQuotation.newTotalCost != selectedQuotation.costs[0].total_cost ? 'oldAmt' : '' "><strong>{{selectedQuotation.costs[0].total_cost | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                                <div class="newAmt text-right" *ngIf="selectedQuotation.newTotalCost != selectedQuotation.costs[0].total_cost"><strong>{{selectedQuotation.newTotalCost | currency: util.getCurrency() :'symbol-narrow'}}</strong></div>
                              </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <h4 class="detailsHeading">Scheduled Payments</h4>
                        <form autocomplete="off" role="form" [formGroup]="payScheduleForm">
                          <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th class="text-right">Amount Due</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let payment_schedule of selectedQuotation.payment_schedules">
                                        <td>{{util.getFormatedDate(payment_schedule.payment_date)}}</td>
                                        <td class="text-right">{{payment_schedule.amount_due | currency: util.getCurrency() :'symbol-narrow'}}</td>
                                    </tr>
                                    <tr *ngFor="let payment of date_items.controls; let indx=index;" [formGroup]="payment">
                                      <td class="form-group">
                                        <div class="dateWrapper">
                                          <span class="closeIcon"> <img (click)="removePaySchedule(indx, payment)" src="assets/icon/close_icon.png" /></span>
                                          <input autocomplete="nope" type="text" placeholder="" formControlName="payment_date" class="date" [matDatepicker]="picker" [min]="minDate" style="pointer-events: none;">
                                          <mat-datepicker #picker ></mat-datepicker>
                                          <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png" class="img-responsive"></span>
                                          <div class="clearfix"></div>
                                          <span class="error-msg" *ngIf="(payment.get('payment_date').invalid) && (payment.get('payment_date').dirty || payment.get('payment_date').touched || submitted)">
                                            <small *ngIf="payment.get('payment_date').errors.required">Date is Required.</small>
                                            <small *ngIf="payment.get('payment_date').errors.min">Please enter upcoming date.</small>
                                          </span>  
                                        </div>
                                      </td>
                                      <td class="form-group">
                                        <input autocomplete="nope" type="text" formControlName="amount_due"  (keyup)="calculatePaymentAmount()">
                                          <span class="error-msg" *ngIf="(payment.get('amount_due').invalid) && (payment.get('amount_due').dirty || payment.get('amount_due').touched || submitted)">
                                              <small *ngIf="payment.get('amount_due').errors.required">Amount Due is Required.</small>
                                              <small *ngIf="payment.get('amount_due').errors.pattern">Invalid Amount Due.</small>
                                          </span>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan=2>
                                        <div class="morePayDates">
                                          <span class="addIcon cursorPtr" (click)="addpayment('0')">
                                            <img src="assets/icon/icon-add.png"> Add Payment Date
                                          </span>
                                        </div>
                                      </td>
                                    </tr>
                                  </tbody>
                                  <tfoot>
                                    <tr>
                                      <td class="text-right">Total Payment Amount</td>
                                      <td class="text-right">
                                        <div [ngClass]="selectedQuotation.newTotalCost != selectedQuotation.oldTotalPaymentAmt ? 'oldAmt' : '' ">{{selectedQuotation.oldTotalPaymentAmt | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                        <div class="newAmt" *ngIf="selectedQuotation.newTotalCost != selectedQuotation.oldTotalPaymentAmt">{{selectedQuotation.totalPaymentAmt | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="remaining text-right">Remaining Payment Amount</td>
                                      <td class="remaining text-right">{{selectedQuotation.newPaymentAmt | currency: util.getCurrency() :'symbol-narrow'}}</td>
                                    </tr>
                                </tfoot>
                            </table>
                          </div>
                        </form>

                        <div class="errMsgCon" *ngIf="totalPayErr"> 
                            <small>{{errMsg}}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="errMsgCon MB20" *ngIf="isError">
            <small>{{errMsg}}</small>
        </div>
        <div class="successMsgCon MB20" *ngIf="isSuccess">
            <small>{{successMsg}}</small>
        </div>
        
        <div class="button-row clearfix">
          <button mat-raised-button class="trea-btn" (click)="editCR()">Edit</button>
          <button mat-raised-button class="trea-btn" (click)="approveCR()">Approve</button>
          <button mat-raised-button class="trea-btn" routerLink="/workflow/quote/csa/quotation-list/0">Cancel</button>
        </div>
    </div>
</div>
<!-- <app-change-request-review></app-change-request-review> -->