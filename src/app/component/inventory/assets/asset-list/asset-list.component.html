<div class="inventory-section">
    <h1 class="pageTitle">Assets</h1>
    <p class="page-summary">Tools, vehicles, equipment, and other long-lived inventory items.</p>

    <div class="trea-welcome" *ngIf="assetList.length == 0 && onBoarding">
            <h4>There are no Assets yet.</h4>
            <p class="textJustified">
                Assets are valuable items used by the company for an extended time, such as vehicles, machines, and expensive tools and equipment. Assets are individually identifiable by serial numbers, as well as unique names and barcodes, and their value is calculated over their lifespan. Each Asset is added based on a specified Item Definition.
            </p>
            <p class="textJustified">
                Assets will be listed here when an authorized user has created one.
            </p>
            <div class="button-row clearfix" *ngIf="util.getRole() == 2 || permissionsSet.createAssets">
                
              <button 
                mat-raised-button
                class="trea-btn"
                type="button"
                (click)="addNewAsset()"
              >
              Create an Asset
              </button>
              
            </div>
            <div class="clearfix" *ngIf="util.getRole() != 2 && !permissionsSet.createAssets">
                <p class="note">Please contact an administrator who can add Asset</p> 
            </div>          
        </div>

    <div class="head-row clearfix" *ngIf="assetList.length != 0">
        <div class="search-section">
            <div class="input-group">
                <span class="search-icn" id="basic-addon1">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </span>
                <input autocomplete="nope" type="text" class="form-control"  [(ngModel)]="searchList" (ngModelChange)="getSearchTxt(searchList)">
                <button mat-raised-button class="client-btn" (click)="searchTxt = searchList">Search</button>
            </div>
        </div>

        <div class="add-client addEmpBtnWrap newAsset" *ngIf="util.getRole() == 2 || permissionsSet.createAssets">
                <div class="dropdown">
            <button  mat-raised-button class="client-btn dropdown-toggle" data-toggle="dropdown" type="button"> New Asset  
              </button>  <!-- (click) = "addNewAsset()-->
               <ul class="dropdown-menu">
                      <li><a href="javascript:void(0)" mat-raised-button class="client-btn" (click)="showProductListPopup()">With P/O </a></li> <!-- @ Shahebaz (click)-->
                     <li><a href="javascript:void(0)" mat-raised-button class="client-btn" (click)="addNewAsset()" >Without P/O </a></li> <!-- @ Shahebaz (routerLink )-->
                </ul>
            </div>
        </div>
        <!-- <div class="add-client addEmpBtnWrap">
            <div class="dropdown">
                <button *ngIf="util.getRole() == 2 || permissionsSet.exportAssets" mat-raised-button class="client-btn dropdown-toggle" type="button" data-toggle="dropdown">Export List
                </button>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" (click)="generatepdf()" class="client-btn">Export as PDF</a></li>
                    <li><a href="javascript:void(0)" (click)="generatecsv()" class="client-btn">Export as CSV</a></li>
                </ul>
            </div>
        </div> -->
    </div>

    <!-- <nav class="tabbed-nav">
        <ul class="tabs-list">
            <li class="tabs">
                <button [ngClass]="assetListTab == 'Available' ? 'act-option' :''" (click)="changeAssetList('Available')" mat-raised-button class="trea-btn">Available</button>
            </li>
            <li class="tabs">
                <button [ngClass]="assetListTab == 'Unavailable' ? 'act-option' :''" (click)="changeAssetList('Unavailable')" mat-raised-button class="trea-btn">Unavailable</button>
            </li>
            <li class="tabs">
                <button [ngClass]="assetListTab == 'Needs Maintenance' ? 'act-option' :''" (click)="changeAssetList('Needs Maintenance')" mat-raised-button class="trea-btn">Maintenance</button>
            </li>
            <li class="tabs">
                <button [ngClass]="assetListTab == 'Missing' ? 'act-option' :''" (click)="changeAssetList('Missing')" mat-raised-button class="trea-btn">Missing</button>
            </li>
        </ul>
    </nav> -->

    <div class="trea-data-table table-responsive" *ngIf="assetList.length != 0">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th width="300">
                        <div class="table-hdr">
                            <div>
                                <span>Name</span>
                                <span (click)="sortList('short_tag', 'A')">
                                    <i [ngClass]=" sortColumn == 'short_tag' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="nameSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>
                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Serial No.</span>
                                <span (click)="sortList('serial_no', 'A')">
                                    <i [ngClass]=" sortColumn == 'serial_no' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="serialSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>
                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Scan Code</span>
                                <span (click)="sortList('scan_code', 'A')">
                                    <i [ngClass]=" sortColumn == 'scan_code' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="scanCodeSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>

 <!-- @ Shahebaz (Start )-->
                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Manufacturer</span>
                                <span (click)="sortList('manf_name', 'A')">
                                    <i [ngClass]=" sortColumn == 'manf_name' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="manfNameSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>

                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Item Definition</span>
                                <span (click)="sortList('item_name', 'A')">
                                    <i [ngClass]=" sortColumn == 'item_name' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="itemNameSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>

                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Item Category</span>
                                <span (click)="sortList('item_type', 'A')">
                                    <i [ngClass]=" sortColumn == 'item_type' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="itemTypeSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>
 <!-- @ Shahebaz (End )-->


                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Location</span>
                                <span (click)="sortList('location_tag', 'A')">
                                    <i [ngClass]=" sortColumn == 'location_tag' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="locationSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>
                    <th>
                        <div class="bdr-left table-hdr">
                            <div>
                                <span>Status</span>
                                <span (click)="sortList('asset_status', 'A')">
                                    <i [ngClass]=" sortColumn == 'asset_status' && sortOrder == 'ASC' ? 'fa-rotate-90' : 'fa-rotate-270' " class="fa fa-signal" aria-hidden="true"></i>
                                </span>
                            </div>
                            <div>
                                <input autocomplete="nope" [(ngModel)]="pageData.statusSearch" type="text" class="form-control"  placeholder="" aria-label="" aria-describedby="basic-addon1">
                            </div>
                        </div>
                    </th>

                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let indx=index ;let asset of assetList | sortBy:sortColumn:sortOrder:sortColumnType |  searchfilter:manfNameSearch:'manf_name'|  searchfilter:itemNameSearch:'item_class_name'| searchfilter:itemTypeSearch:'item_class_type'| searchfilter:nameSearch:'short_tag'| searchfilter:locationSearch:'location_tag' | searchfilter:serialSearch:'serial_no' |  searchfilter:scanCodeSearch:'scan_code' | searchfilter:pageData.statusSearch:'asset_status' | searchfilter:searchTxt:'short_tag,location_tag,serial_no,scan_code,asset_status,manf_name,item_class_name,item_class_type' | listLengthfilter | paginate: paginationKey" (click)="selectAsset(asset, indx)" [ngClass]="assetInfo && asset.selectedAssetId == assetInfo.selectedAssetId ? 'sel-row-highlight' : ''">
                    <td>{{asset.short_tag}}<span class="dn">{{ indx == 0 ? updateCount(asset.count) : ''}}</span></td>
                    <td>{{asset.serial_no}}</td>
                    <td>{{asset.scan_code}}</td>
     <!-- @ Shahebaz (Start )-->
                    <td>{{asset.manf_name}}</td>
                    <td>{{asset.item_class_name}}</td>
                    <td>{{asset.item_class_type}}</td>
     <!-- @ Shahebaz (End )-->
                    <td>{{asset.location_tag}}</td>
                    <td>{{asset.asset_status}}</td>
                </tr>
            </tbody>
        </table>
    </div>


    <div class="treaPagination" *ngIf="assetList.length != 0 && constant.ITEM_COUNT != 0">
        <div class="pull-right">
            <span> {{1+(paginationKey.currentPage-1)*paginationKey.itemsPerPage}} - {{(paginationKey.itemsPerPage <= listCount) && (paginationKey.itemsPerPage+(paginationKey.currentPage-1)*paginationKey.itemsPerPage <= listCount) ? paginationKey.itemsPerPage+(paginationKey.currentPage-1)*paginationKey.itemsPerPage : listCount}}</span><span> of {{listCount}} items</span>
        </div>
        <div class="pull-right">
            <select [(ngModel)]="paginationKey.itemsPerPage" (change)="changeItemPerPage()">
                <option *ngFor="let pageNo of constant.PAGINATION_ITEMS" [ngValue]="pageNo"> {{pageNo}} </option>
            </select>
            <span> items per page</span>
        </div>
        <div class="pull-right">
            <pagination-controls
                (pageChange)="changePage($event)"
                directionLinks="true"
                autoHide="false"
                previousLabel="Pre"
                nextLabel="Next"
                screenReaderPaginationLabel="Pagination"
                screenReaderPageLabel="page"
                screenReaderCurrentLabel="You're on page">
            </pagination-controls>
        </div>
        <div class="clearfix"></div>
    </div>


    <!-- Selected Asset -->
    <div class="selSection" *ngIf="assetInfo">
        <h2 id="assetMark" class="pageTitle">{{assetInfo.short_tag}}</h2>

        <nav class="tabbed-nav">
            <ul class="tabs-list">
                <li class="tabs">
                    <button [ngClass]="assetDetails == 'details' ? 'act-option' :''" (click)="showDetails('details')" mat-raised-button class="trea-btn">Asset Details</button>
                </li>
                <li class="tabs">
                    <button [ngClass]="assetDetails == 'financial' ? 'act-option' :''" (click)="showDetails('financial')" mat-raised-button class="trea-btn">Financials</button>
                </li>
                <!-- <li class="tabs">
                    <button [ngClass]="assetDetails == 'attributes' ? 'act-option' :''" (click)="showDetails('attributes')" mat-raised-button class="trea-btn">Attributes</button>
                </li> -->
                <li class="tabs">
                    <button [ngClass]="assetDetails == 'documents' ? 'act-option' :''" (click)="showDetails('documents')" mat-raised-button class="trea-btn">Documents</button>
                </li>
                <li class="tabs">
                    <button [ngClass]="assetDetails == 'serHistory' ? 'act-option' :''" (click)="showDetails('serHistory')" mat-raised-button class="trea-btn">Service History</button>
                </li>
                <li class="tabs">
                    <button [ngClass]="assetDetails == 'schedule' ? 'act-option' :''" (click)="showDetails('schedule')" mat-raised-button class="trea-btn">Schedule</button>
                </li>
            </ul>
        </nav>

        <div class="itemDetails" *ngIf="assetDetails == 'details'">
            <form autocomplete="off" role="form" [formGroup]="itemForm">
                <!-- <div class="selPart"> -->
                    <!-- <button mat-raised-button class="pull-right trea-btn" [ngClass]="action =='editDetails' ? 'act-option' :''" (click)="changeAction('editDetails')">Edit</button>
                        <button mat-raised-button class="pull-right trea-btn delBtn" (click)="deleteAction(assetInfo.asset_id)">Delete</button> -->
                        <div class="add-client addEmpBtnWrap">
                            <div class="dropdown">
                                <button *ngIf="util.getRole() == 2 || permissionsSet.editAssetsDetails || permissionsSet.editAssetsLocations || permissionsSet.deleteAssets" mat-raised-button class="client-btn dropdown-toggle w160p" type="button" data-toggle="dropdown">Edit
                                </button>
                                <ul class="dropdown-menu">
                                    <li *ngIf="util.getRole() == 2 || permissionsSet.editAssetsDetails || permissionsSet.editAssetsLocations"><a href="javascript:void(0)" class="client-btn w160p" (click)="changeAction('editDetails')">Edit Information &nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                                    <li *ngIf="util.getRole() == 2 || permissionsSet.deleteAssets"><a id="delete-btn" href="javascript:void(0)" class="client-btn w160p" (click)="deleteAction(assetInfo.asset_id)">Delete</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                <!-- </div> -->

                <h3 class="detailsHeading">Item Information</h3>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="previewImg">
                            <!-- <img *ngIf="assetInfo.manf && !assetInfo.manf.manuf_parts_images[0]" src="assets/img/parking.png" class="img-responsive"/> -->
                            <img *ngIf="assetInfo.thumbnail_images" src="{{assetInfo.thumbnail_images}}" class="img-responsive cursorPtr" alt="Asset image" (click)="showImage(assetInfo.thumbnail_images)" />
                        </div>
                    </div>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Item Category</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="info-col">{{assetInfo.manf.class_name.item_class_name}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Manufacturer</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="info-col">{{assetInfo.manf_name}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Item No.</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="info-col">{{assetInfo.manf_part_no}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Item Name</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="info-col">{{assetInfo.short_name}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">UPC</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="info-col">{{assetInfo.upc}}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="detailsHeading">Asset Information</h3>
                <div class="row">
                    <div class="col-sm-12">
                        <!-- Asset Name does not need to be displayed here unless it can be edited -->
                        <!-- <div class="row">
                            <div class="col-sm-5">
                                <div class="label-col">Asset Name</div>
                            </div>
                            <div class="col-sm-7">
                                <div class="info-col">{{assetInfo.short_tag}}</div>
                            </div>
                        </div> -->
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Serial No.</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">{{assetInfo.serial_no}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Scan Code</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">{{assetInfo.scan_code}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Location</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col editInfo" [ngClass]="isEditDetails ? (location_id.invalid && (location_id.dirty || location_id.touched || submitted)) ? 'marBtm5' : 'marBtm15' : ''">
                                    <div *ngIf="!isEditDetails" class="info-col">{{assetInfo.location_name}}</div>
                                    <div class="autoCompleteList" *ngIf="isEditDetails">
                                        <div class="searchList">
                                            <mat-form-field class="product">
                                                <input autocomplete="nope" matInput placeholder=""  [formControl]="location" [matAutocomplete]="locations" (keyup)="validateLoc($event)" id="location_id">
                                                <i *ngIf="location.value!=''" (click)="util.clearAutoComplete('location_id', [location, location_id,location_tag,location_tag_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                                <img *ngIf="location.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                                <mat-autocomplete #locations="matAutocomplete">
                                                    <mat-option *ngFor="let loc of filteredLocations | async" (onSelectionChange)="getSelectedLocation($event, loc)" [value]="loc.location_name">
                                                        <span>{{ loc.location_name }}</span>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <span class="error-msg" *ngIf="location_id.invalid && (location_id.dirty || location_id.touched || submitted)">
                                        <small *ngIf="location_id.errors.required">Please select Location from the list.</small>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Location Tag</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col editInfo" [ngClass]="isEditDetails ? location_tag_id.invalid && (location_tag_id.dirty || location_tag_id.touched || submitted) ? 'marBtm5' : 'marBtm15' : ''">
                                    <div *ngIf="!isEditDetails" class="info-col">{{assetInfo.location_tag}}</div>
                                    <div class="autoCompleteList" *ngIf="isEditDetails">
                                        <div class="searchList">
                                            <mat-form-field class="product">
                                                <input autocomplete="nope" matInput placeholder="" [formControl]="location_tag" [matAutocomplete]="tags" (keyup)="validateLocTags($event)" id="location_tag_id">
                                                <i *ngIf="location_tag.value!=''" (click)="util.clearAutoComplete('location_tag_id', [location_tag, location_tag_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                                <img *ngIf="location_tag.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                                <mat-autocomplete #tags="matAutocomplete">
                                                    <mat-option *ngFor="let tag of filteredTags | async" (onSelectionChange)="getSelectedTag($event, tag)" [value]="tag.location_tag">
                                                        <span>{{ tag.location_tag }}</span>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <span class="error-msg" *ngIf="location_tag_id.invalid && (location_tag_id.dirty || location_tag_id.touched || submitted)">
                                        <small *ngIf="location_tag_id.errors.required">Please select Location Tag from the list.</small>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Assign To</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col editInfo" [ngClass]="isEditDetails ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditDetails" class="info-col">{{assetInfo.wo_assign_to ? assetInfo.wo_assign_to.first_name : '-'}} {{assetInfo.wo_assign_to ? assetInfo.wo_assign_to.last_name : ''}}</div>
                                    <div *ngIf="isEditDetails" class="autoCompleteList">
                                        <div class="searchList">
                                            <mat-form-field class="product">
                                                <input autocomplete="nope" matInput placeholder=""  [formControl]="assign_name" [matAutocomplete]="EmpAutoComp" (keyup)="validateEmp($event)" id="emp_id">
                                                <i *ngIf="assign_name.value!=''" (click)="util.clearAutoComplete('emp_id', [assign_name, assign_to])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                                <img *ngIf="assign_name.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                                <mat-autocomplete #EmpAutoComp="matAutocomplete">
                                                    <mat-option *ngFor="let indx=index; let emp of filteredEmployee | async" [value]="emp.emp_name" (onSelectionChange)="getSelectedEmp(emp,$event)">
                                                    <span>{{ emp.emp_name }}</span>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <!-- <span class="error-msg" *ngIf="location_tag_id.invalid && (location_tag_id.dirty || location_tag_id.touched || submitted)">
                                        <small *ngIf="location_tag_id.errors.required">Please select Location Tag from the list.</small>
                                    </span> -->
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Asset Status</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col editInfo" [ngClass]="isEditDetails ? 'marBtm15' : ''">
                                    <div *ngIf="assetInfo.asset_status != 'Needs Maintenance'">
                                        <div>{{assetInfo.asset_status}}</div>
                                        <button *ngIf="assetInfo.asset_status == 'Available'" mat-raised-button class="trea-btn width200" (click)="needMaintenanceRequest()">Request Maintenance</button>
                                    </div>
                                    <div *ngIf="assetInfo.asset_status == 'Needs Maintenance'">
<!-- @Mohini changes start -->
<a  href="javascript:void(0)"   [routerLink]="['/inventory/csa/maintenance-list/', assetInfo.maintainance_request_id]">Maintenance Requested</a>
<!-- @Mohini changes start -->
                                        <!-- <button mat-raised-button class="trea-btn" (click)="changeStatusToAvailable(assetInfo.asset_id)">Make Available</button> -->
                                    </div>
                                    <!-- <div *ngIf="assetInfo.asset_status != 'Available' && assetInfo.asset_status != 'Needs Maintenance'">{{assetInfo.asset_status}}</div> -->
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="label-col">Comments</div>
                            </div>
                            <div class="col-sm-9">
                                <div *ngIf="!isEditDetails" class="info-col">{{assetInfo.asset_comment}}</div>
                                <!-- <input autocomplete="nope" *ngIf="isEditDetails" type="text" value="W1-Service"> -->
                                <textarea [(ngModel)]="assetInfo.asset_comment" [ngModelOptions]="{standalone: true}" *ngIf="isEditDetails" name="" id="" rows="10" class="width100">{{assetInfo.asset_comment}}</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>

                <div class="errMsgCon mar-top" *ngIf="isError && isEditDetails">
                    <small>{{errMsg}}</small>
                </div>
                <div class="clearfix"></div>

                <div class="button-row" *ngIf="isEditDetails">
                  <button id="update-asset-btn" mat-raised-button class="trea-btn" (click)="updateAsset(assetInfo)">Update</button>
                  <button mat-raised-button class="trea-btn cancelBtn" (click)="cancelEdit()">Cancel</button>
                </div>
            </form>
        </div>

        <!-- FINANCIALS TAB -->
        <div class="financialDetails" *ngIf="assetDetails == 'financial'">
            <form autocomplete="off" role="form" [formGroup]="financialForm">
                <div class="add-client addEmpBtnWrap">
                    <div class="dropdown">
                        <button *ngIf="util.getRole() == 2 || permissionsSet.editAssetsDetails || permissionsSet.deleteAssets" mat-raised-button class="client-btn dropdown-toggle w160p" type="button" data-toggle="dropdown">Edit
                        </button>
                        <ul class="dropdown-menu">
                            <li *ngIf="util.getRole() == 2 || permissionsSet.editAssetsDetails"><a href="javascript:void(0)" class="client-btn w160p" (click)="changeAction('editFinancial')">Edit Information &nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                            <li *ngIf="util.getRole() == 2 || permissionsSet.deleteAssets"><a href="javascript:void(0)" class="client-btn w160p" (click)="deleteAction(assetInfo.asset_id)">Delete</a></li>
                        </ul>
                    </div>
                </div>
                <div class="clearfix"></div>

                <div class="row marTop15">
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Ownership Type</div>
                            </div>
                            <div class="col-sm-6 editInfo">
                                <div class="info-col">{{assetInfo.ownership_type}}</div>
                                <!-- <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.ownership_type}}</div>
                                <select *ngIf="isEditFinancial" [(ngModel)]="assetInfo.ownership_type" [ngModelOptions]="{standalone: true}" class="form-control">
                                    <option>Owned</option>
                                    <option>Leased</option>
                                    <option>Financed</option>
                                </select> -->
                            </div>
                        </div>
                        <div *ngIf="assetInfo.isOwned">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Purchased From</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.supplier ? assetInfo.supplier.supplier_name : ''}}</div>
                                    <div class="autoCompleteList" *ngIf="isEditFinancial">
                                        <div class="searchList">
                                            <mat-form-field class="product">
                                                <input autocomplete="nope" matInput placeholder=""  [formControl]="supplier" [matAutocomplete]="supplierAutoComp" id="supplier_id">
                                                <i *ngIf="supplier.value!=''" (click)="util.clearAutoComplete('supplier_id', [supplier, supplier_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                                <img *ngIf="supplier.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                                <mat-autocomplete #supplierAutoComp="matAutocomplete">
                                                    <mat-option *ngFor="let indx=index; let item of filteredSupplier | async" [value]="item.supplier_name" (onSelectionChange)="getSelectedSupplier(item)">
                                                    <span>{{ item.supplier_name }}</span>
                                                    </mat-option>

                                                    <mat-option (click)="showAddSupplierPopup('ASSET', '2')">
                                                    <img aria-hidden src="assets/icon/icon-add.png" />
                                                    <span>New Supplier</span>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <!-- <select *ngIf="isEditFinancial" formControlName="supplier_id" class="form-control">
                                        <option *ngFor="let supplier of assetSuppliers" [value]="supplier.supplier_id">{{supplier.supplier_name}}</option>
                                    </select> -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Purchase Date</div>
                                </div>
                                <div class="col-sm-6 editInfo">
                                    <div class="info-col" *ngIf="!isEditFinancial">{{util.getFormatedDate(assetInfo.purchase_date)}}</div>
                                    <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <!-- <input autocomplete="nope" type="text" [(ngModel)]="assetInfo.purchase_date" class="date" [matDatepicker]="picker" [min]="minDate" style="pointer-events: none;">
                                        <mat-datepicker #picker></mat-datepicker>
                                        <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png"></span>
                                        <div class="clearfix"></div> -->
                                        <input autocomplete="nope" type="text" formControlName="purchase_date" placeholder="" class="date ptrN h26" [min]="minDate" [matDatepicker]="picker" [max]="maxDate" style="pointer-events: none;">
                                        <mat-datepicker #picker (selectedChanged)="purchaseDateChange($event)"></mat-datepicker>
                                        <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png"></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Purchase Price</div>
                                </div>
                                <div class="col-sm-6 editInfo" >
                                    <div class="info-col" *ngIf="!isEditFinancial" >
                                            {{assetInfo.purchase_price | currency: util.getCurrency() :'symbol-narrow'}}
                                    </div>
                                        <input autocomplete="nope" *ngIf="isEditFinancial" type="text" name="price" formControlName="purchase_price" placeholder="" class="form-control currencyInput" (keyup)="calcMonthlyDepriciation($event, 'PP')">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Estimated Useful Life</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.esti_useful_life}} months</div>
                                    <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <input autocomplete="nope" type="text" formControlName="esti_useful_life" (keyup)="calcMonthlyDepriciation($event, 'EUL')" class="maxW100"> months
                                    </div>
                                    <span class="error-msg" *ngIf="esti_useful_life.invalid && (esti_useful_life.dirty || esti_useful_life.touched || finSubmitted)">
                                        <small *ngIf="esti_useful_life.errors.required">Estimated Useful Life is required.</small>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Residual Value</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">
                                        <!-- <span class="currencySign" *ngIf="util.getCurrency()=='INR'">&#8377;</span>
                                        <span class="currencySign" *ngIf="util.getCurrency()!='INR'">{{util.getCurrencySign()}}</span>   -->
                                            {{assetInfo.residual_value | currency: util.getCurrency() :'symbol-narrow'}}
                                    </div>
                                    <input autocomplete="nope" type="text" *ngIf="isEditFinancial" formControlName="residual_value" (keyup)="calcMonthlyDepriciation($event, 'RV')" >
                                    <span class="error-msg" *ngIf="residual_value.invalid && (residual_value.dirty || residual_value.touched || finSubmitted)">
                                        <small *ngIf="residual_value.errors.required">Residual Value is required.</small>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Age of Equipment</div>
                                </div>
                                <div class="col-sm-6 editInfo">
                                        <!-- *ngIf="!isEditFinancial" -->
                                    <div class="info-col">{{assetInfo.age_of_equipment}} months</div>
                                    <!-- <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <input autocomplete="nope" type="text" *ngIf="isEditFinancial" formControlName="age_of_equipment"> months
                                    </div> -->
                                    <span class="error-msg" *ngIf="age_of_equipment.invalid && (age_of_equipment.dirty || age_of_equipment.touched || finSubmitted)">
                                        <small *ngIf="age_of_equipment.errors.required">Age of Equipment is required.</small>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Monthly Depreciation</div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="info-col">{{assetInfo.montly_depreciation}}</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Present Value</div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="info-col">
                                        {{assetInfo.present_value | currency: util.getCurrency() :'symbol-narrow'}}
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div *ngIf="assetInfo.isLeased">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Leased From</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.leasedSupplier.supplier_name}}</div>
                                    <div class="searchList" *ngIf="isEditFinancial">
                                        <mat-form-field class="product">
                                            <input autocomplete="nope" matInput placeholder=""  [formControl]="leased_from" [matAutocomplete]="leasedAutoComp" (keyup)="validateLSupplier($event)" id="leased_from_id">
                                            <i *ngIf="leased_from.value!=''" (click)="util.clearAutoComplete('leased_from_id', [leased_from, leased_from_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                            <img *ngIf="leased_from.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                            <mat-autocomplete #leasedAutoComp="matAutocomplete">
                                                <mat-option *ngFor="let indx=index; let item of filteredLeasedFrom | async" [value]="item.supplier_name" (onSelectionChange)="getSelectedLSupplier(item, $event)">
                                                <span>{{ item.supplier_name }}</span>
                                                </mat-option>

                                                <mat-option (click)="showAddSupplierPopup('LEASED', '3')">
                                                <img aria-hidden src="assets/icon/icon-add.png" />
                                                <span>New Supplier</span>
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </div>
                                    <!-- <select *ngIf="isEditFinancial" [(ngModel)]="assetInfo.leased_from" [ngModelOptions]="{standalone: true}" class="form-control">
                                        <option *ngFor="let supplier of financeSuppliers" [value]="supplier.supplier_id">{{supplier.supplier_name}}</option>
                                    </select> -->
                                </div>
                            </div>
                        </div>

                        <div *ngIf="assetInfo.isFinanced">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Financed From</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.financedSupplier.supplier_name}}</div>
                                    <div class="autoCompleteList" *ngIf="isEditFinancial">
                                        <div class="searchList">
                                            <mat-form-field class="product">
                                                <input autocomplete="nope" matInput placeholder=""  [formControl]="financed_from" [matAutocomplete]="financedAutoComp" (keyup)="validateFSupplier($event)" id="financed_from_id">
                                                <i *ngIf="financed_from.value!=''" (click)="util.clearAutoComplete('financed_from_id', [financed_from, financed_from_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                                <img *ngIf="financed_from.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                                <mat-autocomplete #financedAutoComp="matAutocomplete">
                                                    <mat-option *ngFor="let indx=index; let item of filteredFinancedFrom | async" [value]="item.supplier_name" (onSelectionChange)="getSelectedFSupplier(item, $event)">
                                                    <span>{{ item.supplier_name }}</span>
                                                    </mat-option>

                                                    <mat-option (click)="showAddSupplierPopup('FINANCED', '3')">
                                                    <img aria-hidden src="assets/icon/icon-add.png" />
                                                    <span>New Supplier</span>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <!-- <select *ngIf="isEditFinancial" [(ngModel)]="assetInfo.financed_from" [ngModelOptions]="{standalone: true}" class="form-control">
                                        <option *ngFor="let supplier of financeSuppliers" [value]="supplier.supplier_id">{{supplier.supplier_name}}</option>
                                    </select> -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Paid Capital</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.paid_capital | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                    <input autocomplete="nope" type="number" *ngIf="isEditFinancial" formControlName="paid_capital">
                                </div>
                            </div>
                        </div>

                        <div *ngIf="assetInfo.isLeased || assetInfo.isFinanced">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Monthly Payment</div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="info-col">{{assetInfo.monthly_payment | currency: util.getCurrency() :'symbol-narrow'}}</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Start Date</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{util.getFormatedDate(assetInfo.start_date)}}</div>
                                    <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <input autocomplete="nope" type="text" formControlName="start_date" class="date ptrN" [matDatepicker]="picker" [max]="maxDate">
                                        <mat-datepicker #picker (selectedChanged)="startDateChange($event)"></mat-datepicker>
                                        <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png"></span>
                                        <div class="clearfix"></div>
                                        <!-- <span class="error-msg" *ngIf="assetInfo.start_date.invalid && (assetInfo.start_date.dirty || assetInfo.start_date.touched || finSubmitted)">
                                            <small *ngIf="assetInfo.start_date.errors.required">Purchase Date is required.</small>
                                        </span> -->
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">End Date</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{util.getFormatedDate(assetInfo.end_date)}}</div>
                                    <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <input autocomplete="nope" type="text" formControlName="end_date" class="date ptrN" [matDatepicker]="picker" [min]="start_date.value">
                                        <mat-datepicker #picker></mat-datepicker>
                                        <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png"></span>
                                        <div class="clearfix"></div>
                                        <!-- <span class="error-msg" *ngIf="assetInfo.end_date.invalid && (assetInfo.end_date.dirty || assetInfo.end_date.touched || finSubmitted)">
                                            <small *ngIf="assetInfo.end_date.errors.required">Purchase Date is required.</small>
                                        </span> -->
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="label-col">Term</div>
                                </div>
                                <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                    <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.term}} months</div>
                                    <div class="dateWrapper" *ngIf="isEditFinancial">
                                        <input autocomplete="nope" type="number" *ngIf="isEditFinancial" formControlName="term"> months
                                    </div>
                                    <span class="error-msg" *ngIf="term.invalid && (term.dirty || term.touched || finSubmitted)">
                                        <small *ngIf="term.errors.required">Term is required.</small>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Warranty Supplier</div>
                            </div>
                            <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.warrantySupplier?.supplier_name}}</div>
                                <div class="autoCompleteList" *ngIf="isEditFinancial">
                                    <div class="searchList">
                                        <mat-form-field class="product">
                                            <input autocomplete="nope" matInput placeholder=""  [formControl]="warranty_supplier" [matAutocomplete]="warrantySupplierAutoComp" (keyup)="validateWSupplier($event)" id="warranty_supplier_id">
                                            <i *ngIf="warranty_supplier.value!=''" (click)="util.clearAutoComplete('warranty_supplier_id', [warranty_supplier, warranty_supplier_id])" class="clearAutoComplete fa fa-times-circle" aria-hidden="true"></i>
                                            <img *ngIf="warranty_supplier.value==''" class="selectBoxIcon" aria-hidden src="assets/icon/select.png" />
                                            <mat-autocomplete #warrantySupplierAutoComp="matAutocomplete">
                                                <mat-option *ngFor="let indx=index; let item of filteredWarrantySupplier | async" [value]="item.supplier_name" (onSelectionChange)="getSelectedWSupplier(item, $event)">
                                                <span>{{ item.supplier_name }}</span>
                                                </mat-option>

                                                <mat-option (click)="showAddSupplierPopup('WARRANTY', '6')">
                                                <img aria-hidden src="assets/icon/icon-add.png" />
                                                <span>New Supplier</span>
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <!-- <select *ngIf="isEditFinancial" [(ngModel)]="assetInfo.warranty_supplier_id" [ngModelOptions]="{standalone: true}" class="form-control">
                                    <option *ngFor="let supplier of financeSuppliers" [value]="supplier.supplier_id">{{supplier.supplier_name}}</option>
                                </select> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Warranty End Date</div>
                            </div>
                            <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                <div *ngIf="!isEditFinancial" class="info-col">{{util.getFormatedDate(assetInfo.warranty_end_date)}}</div>
                                <div class="dateWrapper" *ngIf="isEditFinancial">
                                    <input autocomplete="nope" type="text" formControlName="warranty_end_date" class="date ptrN h26" [matDatepicker]="picker" [min]="minDate">
                                    <!-- <input autocomplete="nope" type="text" formControlName="warranty_end_date" placeholder="" class="date" [matDatepicker]="picker" [min]="minDate" style="pointer-events: none;"> -->
                                    <mat-datepicker #picker></mat-datepicker>
                                    <span class="dateIcon" (click)="picker.open()"><img src="assets/icon/date_picker.png"></span>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Account Reference No.</div>
                            </div>
                            <div class="col-sm-6 editInfo" [ngClass]="isEditFinancial ? 'marBtm15' : ''">
                                <div *ngIf="!isEditFinancial" class="info-col">{{assetInfo.acc_ref_no}}</div>
                                <input autocomplete="nope" type="text" *ngIf="isEditFinancial" formControlName="acc_ref_no">
                                <!-- <span class="error-msg" *ngIf="acc_ref_no.invalid && (acc_ref_no.dirty || acc_ref_no.touched || finSubmitted)">
                                    <small *ngIf="acc_ref_no.errors.required">Acct Ref no is required.</small>
                                </span> -->
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>

                <div class="errMsgCon mar-top" *ngIf="isError && isEditFinancial">
                    <small>{{errMsg}}</small>
                </div>

                <div class="row assetActionSection" *ngIf="isEditFinancial">
                    <div>
                        <button id="fin-update-btn" mat-raised-button class="trea-btn width150 pull-left" (click)="updateFinancial(financialForm, assetInfo)">Update</button>
                        <button mat-raised-button class="trea-btn width150 pull-left cancelBtn" (click)="cancelEdit()">Cancel</button>
                    </div>
                </div>
            </form>
        </div>


        <!-- ATTRIBUTES TAB -->
        <div class="attributes" *ngIf="assetDetails == 'attributes'">
            <div class="selPart">
            </div>
            <div *ngIf="assetInfo.attributes.length > 0">
                <div class="row" *ngFor="let attribute of assetInfo.attributes; let indx = index">
                    <div class="col-sm-6">
                        <div class="label-col">{{attribute.attribute_label}}</div>
                    </div>
                    <div class="col-sm-6">
                        <div class="info-col">{{attribute.attribute_data}}</div>
                    </div>
                </div>
            </div>
            <div *ngIf="assetInfo.attributes.length == 0">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="label-col">No extra attributes added.</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- DOCUMENTS TAB -->
        <div class="documents" *ngIf="assetDetails == 'documents'">
            <div class="selPart">
                <div class="add-client addEmpBtnWrap">
                    <div class="dropdown">
                        <button *ngIf="util.getRole() == 2 || permissionsSet.editAssetsDocuments" mat-raised-button class="client-btn dropdown-toggle w160p" type="button" data-toggle="dropdown" (click)="addNewDoc()">Edit
                        </button>
                        <!-- <ul class="dropdown-menu">
                            <li><a href="javascript:void(0)" class="client-btn w160p" (click)="changeAction('editDocuments')">Edit Information &nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                            <li><a href="javascript:void(0)" class="client-btn w160p" (click)="addNewDoc()">New</a></li>
                        </ul> -->
                    </div>
                </div>
                <!-- <div class="pull-right edit-btn">
                    <div class="dropdown">
                        <button  mat-raised-button class="loc-btn dropdown-toggle edit-loc-btn" type="button" data-toggle="dropdown">Edit
                        </button>
                        <ul class="dropdown-menu" style="right: 0px !important;left: auto;">
                            <li><a href="javascript:void(0)" class="loc-btn">Edit Information</a></li>
                            <li><a (click)="addNewDoc()" href="javascript:void(0)" class="loc-btn" >New</a></li>
                        </ul>
                    </div>
                </div> -->
                <!-- <button mat-raised-button class="pull-right trea-btn" (click)="editDoc()">Edit</button> -->
            </div>
            <!-- *ngIf="assetInfo.docs.length > 0" -->
            <div class="row doc-section">
                <div class="col-sm-4" *ngFor="let doc of assetInfo.docs; let indx = index">
                    <div class="documentWrap">
                        <div class="docImg">
                            <a [href]="doc.doc_path" target="_blank">
                                <img src="assets/icon/document_icon.png" class="img-responsive">
                            </a>
                        </div>
                        <div class="docTitle bold">
                            <a [href]="doc.doc_path" target="_blank">{{doc.doc_name}}</a>
                        </div>
                        <div class="docText">
                            {{doc.doc_desc}}
                        </div>
                    </div>
                </div>
                <div class="col-sm-4" *ngFor="let item of assetInfo.images; let indx = index">
                    <div class="documentWrap">
                        <div class="docImg">
                            <img src="{{item.image_path}}" class="img-responsive" (click)="showImage(item.image_path)">
                        </div>
                        <div class="docTitle bold">
                            {{item.image_name}}
                        </div>
                        <div class="docText">
                            {{item.image_desc ? item.image_desc : ""}}
                        </div>
                    </div>
                </div>
                <div class="col-sm-4" *ngFor="let item of assetInfo.attachments; let indx = index">
                    <div class="documentWrap">
                        <div class="docImg" *ngIf="item.attachment_type == 1">
                            <img src="{{item.attachment_path}}" class="img-responsive"  (click)="showImage(item.attachment_path)">
                        </div>
                        <div class="docImg" *ngIf="item.attachment_type == 2">
                            <a [href]="item.attachment_path" target="_blank">
                                <img src="assets/icon/document_icon.png" class="img-responsive">
                            </a>
                        </div>
                        <div class="docTitle bold">
                            <a [href]="item.attachment_path" target="_blank">{{item.attachment_name}}</a>
                        </div>
                        <div class="docText">
                            {{item.comment ? item.comment : ''}}
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div *ngIf="assetInfo.docs.length == 0 && assetInfo.images.length == 0 && assetInfo.attachments.length == 0">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="label-col">No data found.</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="serviceHistory" *ngIf="assetDetails == 'serHistory'">
            <!-- <div class="selPart"> -->
                <!-- <button mat-raised-button class="pull-right trea-btn" [ngClass]="action =='editSerHistory' ? 'act-option' :''" (click)="changeAction('editSerHistory')">Edit</button> -->
                <!-- <div class="add-client addEmpBtnWrap">
                    <div class="dropdown">
                        <button mat-raised-button class="client-btn dropdown-toggle w160p" type="button" data-toggle="dropdown">Edit
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="javascript:void(0)" class="client-btn w160p" (click)="changeAction('editSerHistory')">Edit Information &nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                            <li><a href="javascript:void(0)" class="client-btn w160p" (click)="deleteAction(assetInfo.asset_id)">Delete</a></li>
                        </ul>
                    </div>
                </div> -->
            <!-- </div> -->
            <div class="row">
                <div class="col-sm-6">
                    <div class="serviceHistTblTitle label-col">Service History</div>
                    <div class="serviceHistTbl table-responsive">
                        <table class="table" *ngIf="assetInfo.service_history.length > 0">
                            <tbody>
                                <tr>
                                    <th>Work Order</th>
                                    <th>Date</th>
                                    <th>Service</th>
                                </tr>
                                <tr *ngFor="let item of assetInfo.service_history">
                                    <td><span [routerLink]="['/workflow/wo/csa/work-order-list/', item.work_order_id]">WO {{item.work_order_no}}</span></td>
                                    <td>{{util.getFormatedDate(item.work_order_date)}}</td>
                                    <td>{{item.wo_services[0].wo_service_definition.service_definition}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table" *ngIf="assetInfo.service_history.length == 0">
                            <tbody>
                                <tr>
                                    <th>Work Order</th>
                                    <th>Date</th>
                                    <th>Service</th>
                                </tr>
                                <tr>
                                    <td colspan="3">No Data Found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- {{ assetInfo.unavailables | json }} -->

        <div class="scheduleDetails" *ngIf="assetDetails == 'schedule'">
            <!-- <div class="serPart text-center">
                <span class="bold">Schedule List</span>
            </div> -->
            <h3 class="detailsHeading">Schedule List</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Schedule No.</th>
                            <th>Start Date</th>
                            <th>Start Time</th>
                            <th>End Date</th>
                            <th>End Time</th>
                            <!-- <th>Repeat</th>
                            <th>Repeat Every</th>
                            <th>Repeat On</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of assetInfo.unavailables">
                            <td>
                                <a href="javascript:void(0)" [routerLink]="['/workflow/schedule/csa/schedule-list/', item.scheduling_id]" class="email">#{{item.scheduling_id}}</a>
                            </td>
                            <td>{{ item.schedule_type == 3 ? 'N/A' : ( util.getFormatedDate(item.start_date) ) }}</td>
                            <td>{{ item.schedule_type == 3 ? 'N/A' : item.start_time.substring(0,5) }} {{ item.schedule_type == 3 ? '' : item.start_time_format }}</td>
                            <td>{{ item.schedule_type == 3 ? 'N/A' : ( util.getFormatedDate(item.end_date) ) }}</td>
                            <td>{{ item.schedule_type == 3 ? 'N/A' : item.end_time.substring(0,5) }} {{ item.schedule_type == 3 ? '' : item.end_time_format }}</td>
                            <!-- <td>{{ item.wo_schedule_type.status }}</td>
                            <td>{{ item.schedule_days && item.schedule_type == 2 ? item.schedule_days : 'N/A' }}</td>
                            <td>{{ item.schedule_repeat ? item.wo_schedule_repeat.status : 'N/A' }}</td> -->
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

</div>


<table id="asset-tbl" class="dn">
    <thead>
        <tr>
            <th>Short Name</th>
            <th>Location</th>
            <th>Serial No.</th>
            <th>Scan Code</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let indx=index ;let asset of assetList | sortBy:sortColumn:sortOrder:sortColumnType |  searchfilter:nameSearch:'short_name'| searchfilter:locationSearch:'location_tag' | searchfilter:serialSearch:'serial_no' | searchfilter:scanCodeSearch:'scan_code' | searchfilter:pageData.statusSearch:'asset_status'  | searchfilter:searchTxt:'short_name,location_tag,serial_no,scan_code,asset_status'">
            <td>{{asset.short_name}}</td>
            <td>{{asset.location_tag}}</td>
            <td>{{asset.serial_no}}</td>
            <td>{{asset.scan_code}}</td>
            <td>{{asset.asset_status}}</td>
        </tr>
    </tbody>
</table>

